<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Song Picker</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="color-scheme" content="dark light" />

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="iphone.css" media="(max-width: 768px)" />
</head>
<body>
  <div id="app" class="app-root">
    <!-- Main Screen -->
    <section id="main-screen" class="screen active">
      <header class="app-header">
        <h1>Song Picker</h1>
      </header>

      <div class="provider-toggle">
        <label class="toggle">
          <span>Apple Music</span>
          <select id="providerSelectMain">
            <option value="apple" selected>Apple Music</option>
            <option value="ytm">YouTube Music</option>
          </select>
        </label>
      </div>

      <!-- Buckets Grid (2 columns x 3 rows) -->
      <div class="buttons-grid two-cols-three-rows">
        <button type="button" id="random-bucket-btn" class="bucket-btn random-btn tall" data-bucket="Random">Random</button>
        <button type="button" class="bucket-btn tall bucket-70s80s" data-bucket="1970s+1980s">1970s + 1980s</button>
        <button type="button" class="bucket-btn tall bucket-90s" data-bucket="1990s">1990s</button>
        <button type="button" class="bucket-btn tall bucket-2000s" data-bucket="2000s">2000s</button>
        <button type="button" class="bucket-btn tall bucket-2010s" data-bucket="2010s">2010s</button>
        <button type="button" class="bucket-btn tall bucket-2020s" data-bucket="2020s">2020s</button>
      </div>

      <!-- Selected Song Box -->
      <div class="center-wrap">
        <div id="result" class="result-card" aria-live="polite">
          <div class="meta">
            <div id="nowPlayingText" class="title">No song selected yet</div>
            <div class="subtitle"></div>
          </div>
          <button type="button" id="copySongBtn" class="copy-btn" title="Copy" aria-label="Copy">Copy</button>
        </div>
      </div>

      <!-- Recent Songs Bar -->
      <div id="recentBar">
        <h3>Last 4 Songs</h3>
        <div id="recentList"></div>
      </div>

      <!-- Bottom Actions -->
      <div class="bottom-actions fixed-bottom" role="toolbar" aria-label="Main actions">
        <div class="left-actions">
          <button type="button" id="import-csv-btn" class="circle-icon circle-green" title="Import (Merge)" aria-label="Import (Merge)">
            <span class="icon-label" aria-hidden="true">⇩</span>
          </button>

          <button type="button" id="import-replace-btn" class="circle-icon circle-green" title="Import & Replace" aria-label="Import & Replace">
            <span class="icon-label" aria-hidden="true">⟲</span>
          </button>

          <button type="button" id="export-csv-btn" class="circle-icon circle-green" title="Export (File)" aria-label="Export (File)">
            <span class="icon-label" aria-hidden="true">⇧</span>
          </button>

          <button type="button" id="firebase-pull-btn" class="circle-icon circle-green" title="Firebase Pull" aria-label="Firebase Pull">
            <span class="icon-label" aria-hidden="true">☁︎⇩</span>
          </button>

          <button type="button" id="firebase-push-btn" class="circle-icon circle-green" title="Firebase Push" aria-label="Firebase Push">
            <span class="icon-label" aria-hidden="true">☁︎⇧</span>
          </button>
        </div>

        <div class="right-actions">
          <button type="button" id="add-song-nav" class="circle-icon circle-green" title="Add Song" aria-label="Add Song">
            <span class="icon-label" aria-hidden="true">＋</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Add Song / Current Songs Screen -->
    <section id="add-screen" class="screen">
      <header class="app-header header-with-toggle">
        <h1>Song Picker</h1>

        <div class="provider-toggle" aria-label="Playback provider">
          <select id="providerSelectAdd" title="Playback Provider" aria-label="Playback Provider">
            <option value="apple" selected>Apple</option>
            <option value="ytm">YouTube</option>
          </select>
        </div>
      </header>

      <div class="form-card">
        <form id="song-form" novalidate>
          <div class="form-row">
            <label for="artist">Artist</label>
            <input type="text" id="artist" name="artist" required />
          </div>

          <div class="form-row">
            <label for="title">Song Title</label>
            <input type="text" id="title" name="title" required />
          </div>

          <div class="form-row">
            <label for="year">Year</label>
            <input type="number" id="year" name="year" min="1900" max="2100" />
          </div>

          <div class="form-actions">
            <button type="submit" class="primary">Save</button>
            <button type="button" id="cancel-add" class="secondary">Back</button>
            <button type="button" id="go-archive" class="secondary">Archive</button>
          </div>
        </form>
      </div>

      <div class="list-toolbar">
        <div class="toolbar-left">
          <button type="button" id="back-current" class="icon-btn">Back</button>
          <button type="button" id="nav-archive" class="icon-btn">Archive</button>
        </div>
      </div>

      <div class="list-preview">
        <div class="list-header">
          <h3>Current Songs</h3>
          <div id="current-counts" class="counts"></div>
        </div>
        <ul id="song-list"></ul>

        <div class="list-bottom-actions">
          <button type="button" id="archive-all-current" class="icon-btn">Archive All Current Songs</button>
        </div>

        <div id="importReport"></div>
      </div>
    </section>

    <!-- Archive Screen -->
    <section id="archive-screen" class="screen">
      <header class="app-header">
        <h2>Archived Songs</h2>
      </header>

      <div class="list-toolbar">
        <div class="toolbar-left">
          <button type="button" id="back-archive" class="icon-btn">Back</button>
          <button type="button" id="nav-current" class="icon-btn">Current</button>
        </div>
        <div class="toolbar-right">
          <button type="button" id="delete-all-archive" class="icon-btn danger">Delete All</button>
          <button type="button" id="unarchive-all" class="icon-btn">Unarchive All</button>
        </div>
      </div>

      <div class="list-preview">
        <div class="list-header">
          <h3>Archive</h3>
          <div id="archive-counts" class="counts"></div>
        </div>
        <ul id="archive-list"></ul>

        <div class="list-bottom-actions">
          <button type="button" id="delete-all-archive-view" class="icon-btn danger">Delete All</button>
          <button type="button" id="unarchive-all-bottom" class="icon-btn">Unarchive All</button>
        </div>
      </div>
    </section>

    <input id="import-csv-file" type="file" accept=".csv,text/csv" hidden />
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
